# 題組一解題步驟


## 步驟一：將素材目錄複製到崗位目錄下，確認素材內容與抽題題號一致
監評長按下倒數計時後，可以先把桌面上素材目錄中的題目素材複製一份到自己的工作目錄下，這時要確認自己複製的題目和抽到的題目是一致的，之後都在工作目錄下來取用相關的素材，這樣比較不容易出錯；在安裝軟體的準備時間裏，也要確認一下電腦桌面中是否有包含了素材這個目錄，並且四個題組的素材都在其中。

---

## 步驟二：將版型檔案及相關素材複製到網站根目錄下，並進行相應的更名及整理
  1. 開立./css, ./js, ./img, ./icon等常用目錄以利檔案分類及管理
  2. 將素材檔中的.css, .js, 及icon圖檔複製到相應的目錄下
  3. 更改版型素材的相關檔名，以符合解題的需要
      * 01P01.html => login.php
      * 01P02.html => index.php
      * 01P03.html => admin.php
      * 01P04.html => news.php
  4. 更改版型素材的相關連結及匯入檔內容
      * 修改 `index.php`,`admin.php` 中 `<link>` 及 `<script>` 中的連結路徑，指向正確的位置
      * 修改 `./css/css.css` 中的圖片 `url` ，指向根目錄下的 `../icon` 目錄
  5. 開啟 `xampp` 及 `apache` 伺服器，使用 `localhost` 或 `127.0.0.1` 檢視網頁是否正確顯示，css 的載入是否正確

---

## 步驟三：進行前後台的檔案整理及切版，分離出共用的區塊或功能。
  1. 建立 `front`及 `admin` 兩個目錄，一個代表前台的相關檔案，一個代表後台的相關檔案，前後台共用的元件則先放在根目錄下，或另開一個 `comm` 目錄用來存放共用的元件
  2. 分離出頁首標題及頁尾頁腳的區塊成為 `header.php` 及 `footer.php`
  3. 前台的 `login.php` 及 `news.php` 去除和 `index.php` 相同的部份，只留下中間區塊即可，並將檔案移到 `./front` 目錄下
  4. 前台的 `index.php` 控出中間的區塊成為獨立的 `home.php` 檔案，並搬移到 `./front/` 目錄下
  5. 後台的 `admin.php` 則挖出中間的區塊成為獨立的元件，在整理後成為九個後台功能的基礎版型檔案。
  6. 使用 `include` 指令來重新組合 `index.php` 及 `admin.php` 頁面，並加上判斷式來確保要組合的檔案是存在的。
  7. 以 `get` 的方式來傳遞各頁面要組合的元件內容，比如 `do=login` 表示要看到的是登入頁面，因此在前台的 `include` 中可以併入 `login.php` 來呈現。
  8. 在 `./front` 目錄中，將 `login.php`, `news.php`, `home.php` 中的 `<marquee>...</marquee>` 也獨立成為一個元件，並放在 `./front/` 目錄下
  9. 在 `./admin` 目錄下根據 `title.php` 來增加其它八項功能的檔案，並更改對應的檔名及檔案內的功能標題內容
  10. 修改 `admin.php` 左方選單中的連結內容由 `href="?do=admin&redo=title"` 改成 `href="?do=title"`，並確認連結可以看到對應的功能內容

```
note:
news.php 及 home.php 下方的<script></script>是用來做為最新消息彈出視窗用的，
因此在切割檔案時，要記得連<script>的部份一起切出去
```

---

## 步驟四：建立資料庫連線檔及常用函式。
  1. 建立 `base.php` 檔，用來放共用的設定及函式。
  2. 設定好PDO的連線參數 `$pdo=new PDO()`
  3. 啟用session `session_start()`
  4. 建立全域變數或是共用函式
      * find(\$table,...\$arg) - 尋找特定條件的單筆資料或第一筆資料
      * all(\$table,...\$arg) - 取得資料表的全部資料或是特定條件的全部資料
      * nums(\$table,...\$arg) - 計算符合條件的資料筆數
      * save(\$talbe,\$data) - 新增或更新單筆資料
      * del(\$table,...\$arg) - 刪除特定條件的全部資料
      * q(\$sql) - 簡化 \$pdo->query(\$sql)->fetchAll() 的使用;
      * to(\$path) - 簡化 header("location:xxxxxx") 的使用;
  5. 做好以上工作後，可以先建一張簡單的資料表，把資料庫連線及所有自訂函式功能先測試一次，以確保後續使用不會有問題。

---

## 步驟五：建立資料表及預設資料。
每個題組依狀況不同，在這一步有不同的做法，視自己對題目的熟悉程度來做應變，可以一次把全部資料表建完，也可以視解題的進度來逐步建立或修改資料表。
這裏我們採用的做法是利用phpmyadmin的複製資料表功能，快速的複製五張欄位相同的資料表（title,ad,mvim,image,news)，
五張類似的資料表並不是所有的欄位都會用得上，我們只是取巧來節省建資料表的時間。

1. 依序建立後台功能需要的九張資料表:
  * title

    | name |  type  |  pk | default | A_I |   note   |
    |:----:|:------:|:---:|:-------:|:---:|:--------:|
    |id    |int(5)  |yes  |         |yes  | 流水號    |
    |file  |text    |     |         |     | 檔名/路徑 |
    |text  |text    |     |         |     | 文字      |
    |sh    |int(1)  |     |   0     |     | 顯示      |
    
  * ad

    | name |  type  |  pk | default | A_I |   note   |
    |:----:|:------:|:---:|:-------:|:---:|:--------:|
    |id    |int(5)  |yes  |         |yes  | 流水號    |
    |file  |text    |     |         |     | 檔名/路徑 |
    |text  |text    |     |         |     | 文字     |
    |sh    |int(1)  |     |   1     |     | 顯示     |

  * mvim
  
    | name |  type  |  pk | default | A_I |   note   |
    |:----:|:------:|:---:|:-------:|:---:|:--------:|
    |id    |int(5)  |yes  |         |yes  | 流水號    |
    |file  |text    |     |         |     | 檔名/路徑 |
    |text  |text    |     |         |     | 文字     |
    |sh    |int(1)  |     |   1     |     | 顯示     |

  * image

    | name |  type  |  pk | default | A_I |   note   |
    |:----:|:------:|:---:|:-------:|:---:|:--------:|
    |id    |int(5)  |yes  |         |yes  | 流水號    |
    |file  |text    |     |         |     | 檔名/路徑 |
    |text  |text    |     |         |     | 文字      |
    |sh    |int(1)  |     |   1     |     | 顯示      |

  * total

    | name |  type  |  pk | default | A_I |   note   |
    |:----:|:------:|:---:|:-------:|:---:|:--------:|
    |id    |int(5)  |yes  |         |yes  |流水號     |
    |total |int(5)  |     |         |     |訪客數     |

  * bottom

    | name |  type  |  pk | default | A_I |   note   |
    |:----:|:------:|:---:|:-------:|:---:|:--------:|
    |id    |int(5)  |yes  |         |yes  |流水號     |
    |bottom|text    |     |         |     |頁尾版權   |

  * news

    | name |  type  |  pk | default | A_I |   note   |
    |:----:|:------:|:---:|:-------:|:---:|:--------:|
    |id    |int(5)  |yes  |         |yes  | 流水號    |
    |file  |text    |     |         |     | 檔名/路徑 |
    |text  |text    |     |         |     | 文字      |
    |sh    |int(1)  |     |   1     |     | 顯示      |

  * admin

    | name |  type  |  pk | default | A_I |   note   |
    |:----:|:------:|:---:|:-------:|:---:|:--------:|
    |id    |int(5)  |yes  |         |yes  | 流水號    |
    |acc   |text    |     |         |     | 帳  號    |
    |pw    |text    |     |         |     | 密  碼    |

  * menu

    | name |  type  |  pk | default | A_I |   note   |
    |:----:|:------:|:---:|:-------:|:---:|:--------:|
    |id    |int(5)  |yes  |         |yes  | 流水號    |
    |href  |text    |     |         |     | 連結      |
    |text  |text    |     |         |     | 文字      |
    |parent|int(5)  |     |         |     | 主選單id  |
    |sh    |int(1)  |     |  1      |     | 顯示      |

2. total,bottom,admin這三張表可以先直接手動塞一筆資料進去，如果對資料夠熟悉，也可以每張表都先塞資料進去，這樣在後續製作功能時，可以更快看到成果
3. 為了解題順利，可以把資料表中的一些欄位設為可接受空值的狀況，這樣即使未設定內容，也能正常新增或更改資料，不過這個做法只是為了先求解題完成而做的取巧，實務上應該根據需求及功能來決定欄位是否可以接受空值，並在程式端檢查來源資料是否為空值